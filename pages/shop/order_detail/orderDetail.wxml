<cu-custom bgColor="bg-gradual-red" isCustom="{{true}}">
  <view slot="content">订单详情</view>
</cu-custom>

<view class="order_status">
  <block wx:if="{{order.refund_id == 0}}">
    <view class="o_status" wx:if="{{order.status == 0}}">待付款</view>
    <view class="o_status" wx:if="{{order.status != 0 && order.status != 1}}">交易成功</view>
    <view class="o_status" wx:if="{{order.status == 1}}">订单取消</view>

  </block>
  <block wx:else>


  </block>


</view>


<view class='deliver_contaniner' wx:if='{{order.refund_id != 0 || (order.status != 0 && order.status != 1)}}'>
  <view>
    <view class="flex justify-between">
      <view>
        <text class='cuIcon-deliver' decode='true'>&emsp;</text>

        <text class="deliver_status" wx:if='{{ order.status == 2}}'>等待发货</text>

        <text class="deliver_status" wx:if='{{ order.status == 3}}'>卖家已发货</text>

        <text class="deliver_status" wx:if='{{ order.status == 4}}'>买家已收货</text>



      </view>
      <view bindtap="goToDeliver">
        <text class='deliver_follow' decode='true'>查看物流&ensp;</text>
        <text class='cuIcon-right text-gray'></text>
      </view>
    </view>
  </view>
  <view class='deliver_time text-gray'>
    <text decode='true'>&nbsp;{{order.updated_at_format}}</text>
  </view>
</view>



<view class='address_contaniner'>
  <view>
    <view class="flex justify-between">
      <view>
        <text class='cuIcon-location' decode='true'>&emsp;</text>
        <text class="reveiver_name">收货人：{{order.name}}</text>
      </view>
      <view>
        <text class='phone' decode='true'>{{order.mobile}}&ensp;</text>
      </view>
    </view>
  </view>
  <view class='address text-gray'>
    <text decode='true'>&nbsp;{{order.province}}{{order.city}}{{order.district}}{{order.detail_address}}</text>
  </view>
</view>

<view class="order_goods_list">

  <view class="order_goods_container radius shadow bg-white">
    <view class="goods_img">
      <image src="{{order.thumb}}" style="height:100%"></image>
    </view>
    <view class="goods_info">
      <view class="goods_title">{{order.goods_name}}</view>
      <view class="goods_size">尺码：{{order.goods_spu_name}}</view>
      <view class="goods_param flex justify-between">
        <view class="goods_num">数量 x {{order.num}}</view>
        <view>
          <text class="goods_price text-price">{{order.unit_price}}</text>
        </view>
      </view>
    </view>
  </view>


</view>

<view class="order_info cu-bar bg-white margin-top">
  <view class='order_info_title action'>
    <text class=' cuIcon-titles text-red '></text>
    <text>订单信息</text>
  </view>
</view>
<view class="order_info_container">

  <view class="order_item_1">
    <view class="order_info_item flex justify-between">
      <view>
        <text>商品总价</text>
      </view>
      <view>
        <text class="text-price">{{order.total_price}}</text>
      </view>
    </view>
    <view class="order_info_item flex justify-between">
      <view>
        <text>运费</text>
      </view>
      <view>
        <text class="text-price">{{order.post_price}}</text>
      </view>
    </view>
    <view class="order_info_item flex justify-between">
      <view>
        <text>优惠券</text>
      </view>
      <view>
        -
        <text class="text-price">{{order.discount_price}}</text>
      </view>
    </view>
    <view class="order_info_item order_price_container flex justify-between">
      <view>
        <text>订单总价</text>
      </view>
      <view>
        <text class="order_price text-price">{{order.real_price}}</text>
      </view>
    </view>
  </view>

  <view class="order_item_2">
    <view class="order_info_item flex justify-between">
      <view>
        <text>订单编号</text>
      </view>
      <view bindtap='copyOrderNo' data-text="{{order.order_n}}">
        <text>{{order.order_n}}</text>
      </view>
    </view>

    <view class="order_info_item flex justify-between">
      <view>
        <text>创建时间</text>
      </view>
      <view>
        <text>{{order.created_at_format}}</text>
      </view>
    </view>
  </view>

</view>

<view class='cu-tabbar-height'></view>

<view class="cu-bar bg-white tabbar  shop foot">
  <button class="action bg-white" open-type="contact">
    <view class="cuIcon-service text-red bg-white">
    </view>
    客服
  </button>
  <block wx:if="{{order.refund_id == 0}}">
    <view class="bg-red submit" wx:if="{{order.status == 0}}">确认付款</view>
    <view class="margin-right-sm text-center" wx:if="{{order.status == 1}}">
      <button class="cu-btn round bg-white shadow" >删除订单</button>
    </view>
    <view class="margin-right-sm text-center" wx:if="{{order.status >= 2}}">
      <button class="cu-btn margin-right-sm round bg-white shadow" bindtap="goToRefund">申请退款</button>
      <button class="cu-btn margin-right-sm round bg-white shadow">查看物流</button>
      <button class="cu-btn round bg-red shadow" wx:if="{{order.status == 3}}">确认收货</button>
    </view>
  </block>
  <block wx:else>

  </block>


</view>